<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:html="http://www.w3.org/1999/xhtml" controllerName="CS4N.EnergyHistory.controller.ElectricMeterData">
  <Page id="myPage" busyIndicatorDelay="100" titleAlignment="Center" enableScrolling="false">
    <customHeader>
      <Bar>
        <contentLeft>
          <Button type="Back" text="{i18n>text_Cockpit}" press="onBackPress"/>
        </contentLeft>
        <contentMiddle>
          <Title text="{i18n>text_MeterReadings}"/>
          <Image src="image/flash-energy-pastel-32.png" height="2rem"/>
          <Title text="{i18n>text_Reading}"/>
        </contentMiddle>
        <!--<contentRight>
          <Button icon="sap-icon://filter" press="onFilterPress" />          
          <Button icon="sap-icon://edit" press="onEditPress" />          
        </contentRight>-->
      </Bar>
    </customHeader>
    <content>
      <IconTabBar id="myTabBar" 
                  expandable="false" 
                  stretchContentHeight="true" 
                  select="onTabSelect" 
                  applyContentPadding="false" 
                  headerMode="Inline">
        <items>
          <IconTabFilter text="{i18n>text_Recording}">
            <Table id="myTable" items="{/viewData/datas}" alternateRowColors="true" fixedLayout="false" noDataText="{i18n>text_NoRecords}">
              <columns>
                <Column>
                  <Text text="{i18n>text_Meter}" />
                </Column>
                <Column>
                  <Text text="{i18n>text_MeterNumber}" />
                </Column>
                <Column>
                  <Text text="{i18n>text_LastReadingDate}" />
                </Column>
                <Column hAlign="End">
                  <Text text="{i18n>text_LastReadingValue}" />
                </Column>
              </columns>
              <items>
                <ColumnListItem vAlign="Middle" type="Navigation" press="onRowPress">
                  <cells>
                    <HBox renderType="Bare" alignItems="Center">
                      <core:Icon src="{definition/iconUrl}" size="2rem" color="Tile"/>
                      <Text text="{definition/name}" class="sapUiSmallMarginBegin"/>
                    </HBox>
                    <Text text="{definition/number}"/>
                    <Text text="{ path: 'data/lastRecordDate', formatter: '.formatDate' }"/>
                    <ObjectNumber number="{data/lastRecordValue}" unit="{definition/capacityUnit}"/>
                  </cells>
                </ColumnListItem>
              </items>
            </Table>
          </IconTabFilter>
          <IconTabFilter text="{i18n>text_Analysis}" enabled="false">
            <Panel id="chartContainer" busyIndicatorDelay="100" height="100%">
              <html:canvas id="chartControl" />
            </Panel>
          </IconTabFilter>
        </items>
      </IconTabBar>
    </content>
  </Page>
</mvc:View>